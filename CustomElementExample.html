<!DOCTYPE html>
<html>
  <head>
    <title>Custom Elements Example</title>
    <script src="lib/usertiming.js"></script>
    <script src="lib/perftest.js"></script>
  </head>
  <body>
    <div id="output"></div>
    <div id="result"></div>
    <script>
      var output = document.getElementById('output')
      var pluginElName = 'my-plugin'
      var p = Object.create(perftest)
      p.run({
        setup: function () {
          var self = this
          customElements.define(pluginElName, class extends HTMLElement {
            connectedCallback () {
              self.testDone()
            }
          })
        },
        test: function () {
          var el = document.createElement(pluginElName)
          output.append(el)
        },
        done: function () {
          var result = document.getElementById('result')
          result.innerHTML = 'created ' + this.total + ' elements with <strong>custom elements</strong> in ' + this.result().toFixed(3) + ' seconds'
        }
      })
    </script>
  </body>
</html>
